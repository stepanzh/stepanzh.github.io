<!DOCTYPE html>
<html lang="ru">
  <head>
        <title>stepanzh — Когда Ctrl-Z не хватает</title>
      <meta charset="utf-8" />
      <meta name="generator" content="Pelican" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <!-- Yandex.Metrika counter -->
      <script type="text/javascript" >
         (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
         m[i].l=1*new Date();
         for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
         k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
         (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

         ym(99933624, "init", {
              clickmap:true,
              trackLinks:true,
              accurateTrackBounce:true,
              webvisor:true
         });
      </script>
      <noscript><div><img src="https://mc.yandex.ru/watch/99933624" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
      <!-- /Yandex.Metrika counter -->

      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=PT+Mono&family=PT+Sans+Caption:wght@400;700&family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
      <link rel="stylesheet" type="text/css" href="https://stepanzh.github.io/theme/css/base.css" />
      <link rel="stylesheet" type="text/css" href="https://stepanzh.github.io/theme/css/highlight.css" />

      <!-- icons -->
      <link rel="icon" href="/favicon.ico" sizes="32x32">
      <link rel="apple-touch-icon" href="/apple-touch-icon.png">



    <meta name="description" content="Как вносить правки так, чтобы можно было откатить их часть. Несколько простых решений и профессиональные инструменты." />

    <meta name="keywords" content="система контроля версий, scm, git, semver, fossil, changelog, правки" />

  </head>

  <body>
      <header class="page-header">
          <hgroup>
            <h1>
              <a class="site-name" href="https://stepanzh.github.io/">
                <img src="https://stepanzh.github.io/theme/images/galsia-transparent-500x500.png" />
                <span>stepanzh</span>
              </a>
            </h1>
          </hgroup>
          <nav class="nav-global">
            <span class="page-nav__item"><a href="https://stepanzh.github.io/"  aria-current="page" >Главная</a></span>
                <span class="page-nav__item"><a href="https://stepanzh.github.io/pages/about-proportio.html" >Пропорцио</a></span>
                <span class="page-nav__item"><a href="https://stepanzh.github.io/pages/my-projects.html" >Проекты</a></span>
                <span class="page-nav__item"><a href="https://stepanzh.github.io/pages/support-me.html" >Поддержать</a></span>
                <span class="page-nav__item"><a href="https://stepanzh.github.io/pages/contacts.html" >Контакты</a></span>
          </nav>
      </header>
      <main class="page-main">
  <article class="article">
    <header>
      <h2 class="article-heading">Когда Ctrl-Z не хватает</h2>
      
    </header>
    <blockquote class="epigraph">
<p>Ситуация.
Вы готовите презентацию, пишете отчёт или код, дизайните обложку, в общем, работаете над проектом не одного дня.
В какой-то момент требуется доработка: заказчик попросил, пользователь обнаружил баг или начальнику что-то не понравилось.
Вы вносите правки, отправляете на проверку, и получаете ответ наподобие «это оставь, а то верни, как было».</p>
<p>Как откатить часть изменений?</p>
</blockquote>
<div class="section" id="section-1">
<h2>Решение 1. Завести директорию для версий.</h2>
<ol class="arabic simple">
<li>Заводите директорию под архив предыдущих версий.</li>
<li>Когда правки накопились, копируете текущую версию в архив и даёте ей номер.</li>
</ol>
<div class="figure align-center">
<img alt="" src="https://stepanzh.github.io/images/ctrl-z/dir.png" style="width: 384px;" />
<p class="caption">Решение 1. Директория с версиями файла.</p>
</div>
</div>
<div class="section" id="section-2">
<h2>Решение 2. Особенное имя для текущей версии.</h2>
<ol class="arabic simple">
<li>Одна директория под все версии, включая текущую.</li>
<li>Имя текущей версии начинаете с нижнего подчёркивания («_презентация.pptx»).
Так она сортируется первой в списке файлов.<ul>
<li>Если файловый проводник сортирует файлы иначе, начните имя текущей версии по-другом, например, с «A» или «0».</li>
</ul>
</li>
<li>Когда правки накопились, копируете текущую версию и переименовываете подобно прошлым.</li>
</ol>
<div class="figure align-center">
<img alt="" src="https://stepanzh.github.io/images/ctrl-z/name.png" style="width: 384px;" />
<p class="caption">Решение 2. Особенное имя для текущей версии, чтобы она всегда была под рукой.</p>
</div>
</div>
<div class="section" id="section-3">
<h2>Решение 3. Символьная ссылка.</h2>
<p>Вы действуете как в Решении 2, но поддерживаете ссылку на текущую версию.
Особенно удобно при работе из командной оболочки.</p>
<div class="figure align-center">
<img alt="" src="https://stepanzh.github.io/images/ctrl-z/name.png" style="width: 384px;" />
<p class="caption">Решение 3. Символьная ссылка на текущую версию.</p>
</div>
</div>
<div class="section" id="section-4">
<h2>Дальнейшие усовершенстовования</h2>
<div class="section" id="section-5">
<h3>Решение 4. Система контроля версий.</h3>
<p>Погромисты придумали автоматический инструмент, называемый «системой контроля версий».
Это программа, которая следит за изменениями в файлах проекта и позволяет их сохранять в историю.
Затем вы можете просматривать историю, отслеживать изменения и автоматически получать их список в формате «было-стало».
Вообще, такая система незаменима для проектов, над которыми работают несколько людей.</p>
<p>Самая популярная система контроля версий сейчас (2025) это <a class="reference external" href="https://git-scm.com/">Git</a>.
Но некоторые проекты используют <a class="reference external" href="https://subversion.apache.org/">Subversion</a> и <a class="reference external" href="https://www.mercurial-scm.org/">Mercurial</a>.
Если вы не работаете в консоли, посмотрите на <a class="reference external" href="https://git-scm.com/downloads/guis">оконные морды для гита</a>, они удобны.
Из оконных морд я пользовался только Sublime Merge.</p>
<p>Ещё я бы отметил систему <a class="reference external" href="https://www.fossil-scm.org/">Fossil</a>.
В ней, помимо контроля версий, встроена возможность развернуть свой мини-гитхаб с форумом, вики и прочим.</p>
</div>
<div class="section" id="section-6">
<h3>Семантическое версионирование</h3>
<p>Версионирование это набор принципов, по которым вы решаете «что такое версия, а что нет».
А ещё версионирование решает, как версии продукта именовать.
В идеале, версия файла вам должна сообщить масштаб изменений, и стоит ли она вашего внимания.
Простейший пример — номер издания книги.</p>
<p>Пожалуй, самый компактный и гуманистический набор правил это <a class="reference external" href="https://semver.org/">semantic versioning</a>.
Он создавался под программное обеспечение, но идеи хороши и для других продуктов.
Я бы сформулировал единственный принцип так.</p>
<blockquote>
<em>Изменения в продукте бывают разных категорий и значимости.
Название версии продукта должно это отражать.</em></blockquote>
<p>Версионирование необходимо более-менее крупным проектам.
А при разработке программного обеспечения оно помогает избежать «ада зависимостей» — ситуации, когда обновление какой-то части может поломать работу других.</p>
<div class="section" id="section-7">
<h4>Пример про презентации</h4>
<p>В презентации могут быть исправления смысловых ошибок, опечаток и визуала.
Исправление смысловой ошибки гораздо серьёзней и важнее остальных: если не исправить eё, нас не так поймут (мы обманем).
А вот в остальных случаях мы отделаемся косыми взглядами.</p>
<p>Следуя идее выше, система версий для презентаций может быть устроена так.
Для названия используем два числа А и Б, а полным названием версии будет А.Б, например, 1.2.
Число А будет отвечать за серьёзные изменения (устранение семантической ошибки, новый контент), а число Б за мелкие исправления контента и визуала.</p>
<p>Представьте теперь, что вы читали версию 1.0.
Потом видите свежую, 1.5, и думаете: «Окей, тут наисправляли недочёты, я их видел(а) в 1.0, не буду тратить время».
Ещё через неделю видите 2.3 и уже думаете иначе: «Ага... Тут уже много чего исправили. Надо бы освежить, ведь я знаком(а) только с 1.0».</p>
<p>Как-то так это должно работать.</p>
</div>
</div>
<div class="section" id="section-8">
<h3>Список изменений</h3>
<img alt="" src="https://stepanzh.github.io/images/ctrl-z/release-notes-pelican.png" style="width: 100%;" />
<p>В хороших книгах есть предисловие к каждому изданию.
Прочитав предисловия, вы можете понять, какие разделы появились раньше (изначальная цель авторов), много ли было исправлений (как часто авторы и редколлегия ошибаются), ну и почему книга распухла до 700 страниц.</p>
<p>Так, правило хорошего тона — поддерживать список изменений в проекте, будь-то годовой отчёт или программный продукт.
Список изменений служит читателю: заказчику, коллеге, вам.
С его помощью понятно, что именно изменилось с предыдущей версии.</p>
<p>Я считаю, что для софта список изменений (changelog на погромистском) необходим: будь-то внутренний проект или опенсурс.
Хороший шаблон списка изменений вот этот — <a class="reference external" href="https://keepachangelog.com/">keep a changelog</a>.</p>
<p>Для продуктов типа презентаций или отчётов (один документ) я оставляю список изменений где-то в начале, прям внутри документа.</p>
</div>
</div>

    <footer class="article-footer">
      <p class="article-date">
        <time datetime="2024-10-22T00:00:00+03:00">2024-10-22</time>.          Обновлено <time datetime="2025-02-09T00:00:00+03:00">2025-02-09</time>.
      </p>
      <section class="article-footer__actions">
        <div><a href="https://stepanzh.github.io/pages/support-me.html" rel="bookmark">❤️ Поблагодарить автора</a></div>
        <div><a href="https://t.me/stepanzh_blog/" rel="nofollow">👀 Подписаться на новости</a></div>
      </section>
    </footer>
  </article>
      </main>
      <footer class="page-footer">
          <p>&copy; Захаров Степан</p>
          <p>Сайт создан с помощью <a target="_blank" rel="nofollow" href="https://getpelican.com/">Pelican</a></p>
      </footer>
  </body>
</html>